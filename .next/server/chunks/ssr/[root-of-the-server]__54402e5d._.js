module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},33714,a=>{a.v("/_next/static/media/tiller.aaf8e244.jpeg")},92e3,a=>{"use strict";let b=(0,a.i(70106).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)},41675,a=>{"use strict";let b=(0,a.i(70106).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},62380,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(70106);let f=(0,e.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var g=a.i(87532),h=a.i(1199),i=a.i(41675);let j=(0,e.default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),k=(0,e.default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var l=a.i(92e3),m=a.i(89251),n=a.i(99570),o=a.i(66718),p=a.i(86304),q=a.i(70430),r=a.i(80701),s=a.i(6015),t=a.i(14574),u=a.i(50944),v=a.i(78976),w=a.i(54614);function x(){let[a,e]=(0,c.useState)("/billing"),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)("all"),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(!1),J=(0,u.useRouter)(),{toast:K}=(0,w.useToast)(),[L,M]=(0,c.useState)({projectId:"",phaseId:"",amount:"",dueDate:"",status:"PENDING"});(0,c.useEffect)(()=>{N()},[]);let N=async()=>{let[a,b]=await Promise.all([(0,v.fetchBills)(),(0,v.fetchProjects)()]);C(a),E(b)},O=a=>new Intl.NumberFormat("en-BD",{style:"currency",currency:"BDT",notation:"compact",maximumFractionDigits:1}).format(a),P=B.filter(a=>{let b=a.projectName.toLowerCase().includes(x.toLowerCase()),c="all"===z||a.status===z;return b&&c}),Q=B.reduce((a,b)=>({total:a.total+b.amount,received:a.received+("PAID"===b.status?b.amount:0),pending:a.pending+("PENDING"===b.status?b.amount:0)}),{total:0,received:0,pending:0}),R=D.find(a=>a.id===L.projectId),S=async a=>{(a.preventDefault(),L.projectId&&L.amount&&L.dueDate)?(I(!0),await (0,v.createBill)(L.projectId,{phaseId:L.phaseId||"manual",amount:parseFloat(L.amount),dueDate:new Date(L.dueDate),status:L.status})&&(K({title:"Bill Created",description:"New bill has been added successfully"}),G(!1),M({projectId:"",phaseId:"",amount:"",dueDate:"",status:"PENDING"}),N()),I(!1)):K({title:"Error",description:"Please fill all required fields",variant:"destructive"})};return(0,b.jsxs)(m.DashboardLayout,{title:"Billing",currentPath:a,onNavigate:a=>{e(a),J.push(a)},children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Billing"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Track all project bills and payments"})]}),(0,b.jsxs)(n.Button,{className:"gap-2",onClick:()=>G(!0),children:[(0,b.jsx)(f,{className:"w-4 h-4"}),"Add Bill"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-card rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,b.jsx)(h.Receipt,{className:"w-5 h-5 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Billed"}),(0,b.jsx)("p",{className:"text-xl font-bold",children:O(Q.total)})]})]})}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-card rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-success/10 flex items-center justify-center",children:(0,b.jsx)(j,{className:"w-5 h-5 text-success"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Received"}),(0,b.jsx)("p",{className:"text-xl font-bold text-success",children:O(Q.received)})]})]})}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass-card rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-warning/10 flex items-center justify-center",children:(0,b.jsx)(k,{className:"w-5 h-5 text-warning"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Pending"}),(0,b.jsx)("p",{className:"text-xl font-bold text-warning",children:O(Q.pending)})]})]})})]}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass-card rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(g.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,b.jsx)(o.Input,{placeholder:"Search bills, projects...",value:x,onChange:a=>y(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(r.Select,{value:z,onValueChange:A,children:[(0,b.jsx)(r.SelectTrigger,{className:"w-full sm:w-[180px]",children:(0,b.jsx)(r.SelectValue,{placeholder:"Status"})}),(0,b.jsxs)(r.SelectContent,{children:[(0,b.jsx)(r.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(r.SelectItem,{value:"PAID",children:"Paid"}),(0,b.jsx)(r.SelectItem,{value:"PENDING",children:"Pending"})]})]})]})}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-card rounded-xl overflow-hidden",children:[(0,b.jsxs)(s.Table,{children:[(0,b.jsx)(s.TableHeader,{children:(0,b.jsxs)(s.TableRow,{children:[(0,b.jsx)(s.TableHead,{children:"Project"}),(0,b.jsx)(s.TableHead,{children:"Due Date"}),(0,b.jsx)(s.TableHead,{children:"Amount"}),(0,b.jsx)(s.TableHead,{children:"Status"})]})}),(0,b.jsx)(s.TableBody,{children:P.map((a,c)=>(0,b.jsxs)(d.motion.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*c},className:"hover:bg-muted/50 cursor-pointer",children:[(0,b.jsx)(s.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-muted flex items-center justify-center",children:(0,b.jsx)(h.Receipt,{className:"w-5 h-5 text-muted-foreground"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.projectName}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.id})]})]})}),(0,b.jsx)(s.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(i.Calendar,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:new Date(a.dueDate).toLocaleDateString()})]})}),(0,b.jsx)(s.TableCell,{children:(0,b.jsx)("span",{className:"font-medium",children:O(a.amount)})}),(0,b.jsx)(s.TableCell,{children:(0,b.jsxs)(p.Badge,{className:`gap-1 ${(a=>{switch(a){case"PAID":return"bg-success/10 text-success";case"PARTIAL":return"bg-warning/10 text-warning";default:return"bg-muted text-muted-foreground"}})(a.status)}`,children:[(a=>{switch(a){case"PAID":return(0,b.jsx)(j,{className:"w-4 h-4"});case"PARTIAL":return(0,b.jsx)(k,{className:"w-4 h-4"});case"PENDING":return(0,b.jsx)(l.AlertCircle,{className:"w-4 h-4"});default:return null}})(a.status),a.status]})})]},a.id))})]}),0===P.length&&(0,b.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"No bills found matching your criteria."})]})]}),(0,b.jsx)(t.Dialog,{open:F,onOpenChange:G,children:(0,b.jsxs)(t.DialogContent,{className:"sm:max-w-md",children:[(0,b.jsx)(t.DialogHeader,{children:(0,b.jsx)(t.DialogTitle,{children:"Add New Bill"})}),(0,b.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Project *"}),(0,b.jsxs)(r.Select,{value:L.projectId,onValueChange:a=>M({...L,projectId:a,phaseId:""}),children:[(0,b.jsx)(r.SelectTrigger,{children:(0,b.jsx)(r.SelectValue,{placeholder:"Select project"})}),(0,b.jsx)(r.SelectContent,{children:D.map(a=>(0,b.jsx)(r.SelectItem,{value:a.id,children:a.name},a.id))})]})]}),R&&R.phases.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Phase (optional)"}),(0,b.jsxs)(r.Select,{value:L.phaseId,onValueChange:a=>M({...L,phaseId:a}),children:[(0,b.jsx)(r.SelectTrigger,{children:(0,b.jsx)(r.SelectValue,{placeholder:"Select phase"})}),(0,b.jsx)(r.SelectContent,{children:R.phases.map(a=>(0,b.jsxs)(r.SelectItem,{value:a.id,children:[a.title," (",a.percentage,"%)"]},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Amount (BDT) *"}),(0,b.jsx)(o.Input,{type:"number",placeholder:"Enter amount",value:L.amount,onChange:a=>M({...L,amount:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Due Date *"}),(0,b.jsx)(o.Input,{type:"date",value:L.dueDate,onChange:a=>M({...L,dueDate:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{children:"Status"}),(0,b.jsxs)(r.Select,{value:L.status,onValueChange:a=>M({...L,status:a}),children:[(0,b.jsx)(r.SelectTrigger,{children:(0,b.jsx)(r.SelectValue,{})}),(0,b.jsxs)(r.SelectContent,{children:[(0,b.jsx)(r.SelectItem,{value:"PENDING",children:"Pending"}),(0,b.jsx)(r.SelectItem,{value:"PAID",children:"Paid"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,b.jsx)(n.Button,{type:"button",variant:"outline",onClick:()=>G(!1),className:"flex-1",children:"Cancel"}),(0,b.jsx)(n.Button,{type:"submit",className:"flex-1",disabled:H,children:H?"Creating...":"Create Bill"})]})]})]})})]})}a.s(["default",()=>x],62380)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__54402e5d._.js.map