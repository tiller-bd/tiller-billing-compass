module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},33714,a=>{a.v("/_next/static/media/tiller.aaf8e244.jpeg")},86304,a=>{"use strict";var b=a.i(87924),c=a.i(187),d=a.i(68114);let e=(0,c.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{className:(0,d.cn)(e({variant:c}),a),...f})}a.s(["Badge",()=>f])},24050,a=>{"use strict";var b=a.i(72131),c=a.i(7554),d=a.i(37738),e=a.i(70121),f=a.i(50104),g=a.i(92843),h=a.i(30553),i=a.i(46872),j=a.i(25152),k=a.i(7827),l=a.i(87924),m="rovingFocusGroup.onEntryFocus",n={bubbles:!1,cancelable:!0},o="RovingFocusGroup",[p,q,r]=(0,d.createCollection)(o),[s,t]=(0,f.createContextScope)(o,[r]),[u,v]=s(o),w=b.forwardRef((a,b)=>(0,l.jsx)(p.Provider,{scope:a.__scopeRovingFocusGroup,children:(0,l.jsx)(p.Slot,{scope:a.__scopeRovingFocusGroup,children:(0,l.jsx)(x,{...a,ref:b})})}));w.displayName=o;var x=b.forwardRef((a,d)=>{let{__scopeRovingFocusGroup:f,orientation:g,loop:p=!1,dir:r,currentTabStopId:s,defaultCurrentTabStopId:t,onCurrentTabStopIdChange:v,onEntryFocus:w,preventScrollOnEntryFocus:x=!1,...y}=a,z=b.useRef(null),A=(0,e.useComposedRefs)(d,z),C=(0,k.useDirection)(r),[D,E]=(0,j.useControllableState)({prop:s,defaultProp:t??null,onChange:v,caller:o}),[F,G]=b.useState(!1),H=(0,i.useCallbackRef)(w),I=q(f),J=b.useRef(!1),[K,L]=b.useState(0);return b.useEffect(()=>{let a=z.current;if(a)return a.addEventListener(m,H),()=>a.removeEventListener(m,H)},[H]),(0,l.jsx)(u,{scope:f,orientation:g,dir:C,loop:p,currentTabStopId:D,onItemFocus:b.useCallback(a=>E(a),[E]),onItemShiftTab:b.useCallback(()=>G(!0),[]),onFocusableItemAdd:b.useCallback(()=>L(a=>a+1),[]),onFocusableItemRemove:b.useCallback(()=>L(a=>a-1),[]),children:(0,l.jsx)(h.Primitive.div,{tabIndex:F||0===K?-1:0,"data-orientation":g,...y,ref:A,style:{outline:"none",...a.style},onMouseDown:(0,c.composeEventHandlers)(a.onMouseDown,()=>{J.current=!0}),onFocus:(0,c.composeEventHandlers)(a.onFocus,a=>{let b=!J.current;if(a.target===a.currentTarget&&b&&!F){let b=new CustomEvent(m,n);if(a.currentTarget.dispatchEvent(b),!b.defaultPrevented){let a=I().filter(a=>a.focusable);B([a.find(a=>a.active),a.find(a=>a.id===D),...a].filter(Boolean).map(a=>a.ref.current),x)}}J.current=!1}),onBlur:(0,c.composeEventHandlers)(a.onBlur,()=>G(!1))})})}),y="RovingFocusGroupItem",z=b.forwardRef((a,d)=>{let{__scopeRovingFocusGroup:e,focusable:f=!0,active:i=!1,tabStopId:j,children:k,...m}=a,n=(0,g.useId)(),o=j||n,r=v(y,e),s=r.currentTabStopId===o,t=q(e),{onFocusableItemAdd:u,onFocusableItemRemove:w,currentTabStopId:x}=r;return b.useEffect(()=>{if(f)return u(),()=>w()},[f,u,w]),(0,l.jsx)(p.ItemSlot,{scope:e,id:o,focusable:f,active:i,children:(0,l.jsx)(h.Primitive.span,{tabIndex:s?0:-1,"data-orientation":r.orientation,...m,ref:d,onMouseDown:(0,c.composeEventHandlers)(a.onMouseDown,a=>{f?r.onItemFocus(o):a.preventDefault()}),onFocus:(0,c.composeEventHandlers)(a.onFocus,()=>r.onItemFocus(o)),onKeyDown:(0,c.composeEventHandlers)(a.onKeyDown,a=>{if("Tab"===a.key&&a.shiftKey)return void r.onItemShiftTab();if(a.target!==a.currentTarget)return;let b=function(a,b,c){var d;let e=(d=a.key,"rtl"!==c?d:"ArrowLeft"===d?"ArrowRight":"ArrowRight"===d?"ArrowLeft":d);if(!("vertical"===b&&["ArrowLeft","ArrowRight"].includes(e))&&!("horizontal"===b&&["ArrowUp","ArrowDown"].includes(e)))return A[e]}(a,r.orientation,r.dir);if(void 0!==b){if(a.metaKey||a.ctrlKey||a.altKey||a.shiftKey)return;a.preventDefault();let e=t().filter(a=>a.focusable).map(a=>a.ref.current);if("last"===b)e.reverse();else if("prev"===b||"next"===b){var c,d;"prev"===b&&e.reverse();let f=e.indexOf(a.currentTarget);e=r.loop?(c=e,d=f+1,c.map((a,b)=>c[(d+b)%c.length])):e.slice(f+1)}setTimeout(()=>B(e))}}),children:"function"==typeof k?k({isCurrentTabStop:s,hasTabStop:null!=x}):k})})});z.displayName=y;var A={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function B(a,b=!1){let c=document.activeElement;for(let d of a)if(d===c||(d.focus({preventScroll:b}),document.activeElement!==c))return}a.s(["Item",()=>z,"Root",()=>w,"createRovingFocusGroupScope",()=>t])},53524,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(89251),e=a.i(46271),f=a.i(70106);let g=(0,f.default)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);var h=a.i(17755);let i=(0,f.default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var j=a.i(72228),k=a.i(99570),l=a.i(86304),m=a.i(33140),n=a.i(35732),o=a.i(68114);function p(){return(0,b.jsx)("div",{className:"glass-card rounded-xl overflow-hidden border border-border/50",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsx)("tr",{className:"border-b border-border bg-muted/30",children:[...Array(7)].map((a,c)=>(0,b.jsx)("th",{className:"p-4 text-left",children:(0,b.jsx)(m.Skeleton,{className:"h-4 w-20"})},c))})}),(0,b.jsx)("tbody",{children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsxs)("tr",{className:"border-b border-border/50",children:[(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(m.Skeleton,{className:"h-10 w-40"})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(m.Skeleton,{className:"h-4 w-24"})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(m.Skeleton,{className:"h-4 w-24"})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(m.Skeleton,{className:"h-10 w-32"})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(m.Skeleton,{className:"h-6 w-24"})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(m.Skeleton,{className:"h-6 w-16"})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(m.Skeleton,{className:"h-8 w-8 rounded-full"})})]},c))})]})})})}function q({projects:a,onProjectClick:d}){let[f,m]=(0,c.useState)("signDate"),[p,q]=(0,c.useState)("desc"),r=a=>new Intl.NumberFormat("en-BD",{style:"currency",currency:"BDT",maximumFractionDigits:0}).format(a),s=(0,c.useMemo)(()=>{let b=[...a];return b.sort((a,b)=>{let c=0;switch(f){case"name":c=(a.name||"").localeCompare(b.name||"");break;case"clientName":c=(a.clientName||"").localeCompare(b.clientName||"");break;case"totalBudget":c=(a.totalBudget||0)-(b.totalBudget||0);break;case"signDate":c=new Date(a.signDate).getTime()-new Date(b.signDate).getTime();break;case"status":c=(a.status||"").localeCompare(b.status||"")}return"asc"===p?c:-c}),b},[a,f,p]),t=a=>{f===a?q("asc"===p?"desc":"asc"):(m(a),q("asc"))};return(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4},className:"glass-card rounded-xl overflow-hidden border border-border/50",children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-border bg-muted/30",children:[(0,b.jsx)("th",{className:"text-left p-4 font-medium text-muted-foreground text-xs uppercase tracking-wider",children:(0,b.jsxs)("button",{onClick:()=>t("name"),className:"flex items-center gap-1 hover:text-foreground transition-colors",children:["Project ",(0,b.jsx)(g,{className:"w-3 h-3"})]})}),(0,b.jsx)("th",{className:"text-left p-4 font-medium text-muted-foreground text-xs uppercase tracking-wider",children:(0,b.jsxs)("button",{onClick:()=>t("clientName"),className:"flex items-center gap-1 hover:text-foreground transition-colors",children:["Client ",(0,b.jsx)(g,{className:"w-3 h-3"})]})}),(0,b.jsx)("th",{className:"text-left p-4 font-medium text-muted-foreground text-xs uppercase tracking-wider",children:(0,b.jsxs)("button",{onClick:()=>t("signDate"),className:"flex items-center gap-1 hover:text-foreground transition-colors",children:["Sign Date ",(0,b.jsx)(g,{className:"w-3 h-3"})]})}),(0,b.jsx)("th",{className:"text-left p-4 font-medium text-muted-foreground text-xs uppercase tracking-wider",children:(0,b.jsxs)("button",{onClick:()=>t("totalBudget"),className:"flex items-center gap-1 hover:text-foreground transition-colors",children:["Budget ",(0,b.jsx)(g,{className:"w-3 h-3"})]})}),(0,b.jsx)("th",{className:"text-left p-4 font-medium text-muted-foreground text-xs uppercase tracking-wider",children:"Progress"}),(0,b.jsx)("th",{className:"text-left p-4 font-medium text-muted-foreground text-xs uppercase tracking-wider",children:(0,b.jsxs)("button",{onClick:()=>t("status"),className:"flex items-center gap-1 hover:text-foreground transition-colors",children:["Status ",(0,b.jsx)(g,{className:"w-3 h-3"})]})}),(0,b.jsx)("th",{className:"text-right p-4 font-medium text-muted-foreground text-xs uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:s.map((a,c)=>{let e=a.totalBudget&&0!==a.totalBudget?Math.min(100,Math.round((a.bills||[]).filter(a=>"PAID"===a.status).reduce((a,b)=>a+(Number(b.receivedAmount)||0),0)/a.totalBudget*100)):0,f=(a.bills||[]).filter(a=>"PAID"===a.status).reduce((a,b)=>a+(Number(b.receivedAmount)||0),0);return(0,b.jsxs)("tr",{className:"border-b border-border/50 hover:bg-muted/10 transition-colors cursor-pointer group",onClick:()=>d?.(a),children:[(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("p",{className:"font-semibold text-foreground text-sm group-hover:text-primary transition-colors",children:a.name})}),(0,b.jsx)("td",{className:"p-4 text-xs text-muted-foreground",children:a.clientName}),(0,b.jsx)("td",{className:"p-4 text-xs text-muted-foreground",children:a.signDate?(0,j.format)(new Date(a.signDate),"MMM dd, yyyy"):"N/A"}),(0,b.jsxs)("td",{className:"p-4",children:[(0,b.jsx)("p",{className:"font-medium text-foreground text-sm",children:r(a.totalBudget)}),(0,b.jsxs)("p",{className:"text-[10px] text-muted-foreground",children:["Rec: ",r(f)]})]}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsxs)("div",{className:"w-24",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-1",children:(0,b.jsxs)("span",{className:"text-[10px] font-medium text-foreground",children:[e,"%"]})}),(0,b.jsx)("div",{className:"h-1 bg-muted rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-primary rounded-full transition-all duration-500",style:{width:`${e}%`}})})]})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(l.Badge,{variant:"outline",className:(0,o.cn)("text-[10px] px-1.5 py-0 font-medium",(a=>{switch(a){case"ONGOING":return"bg-primary/20 text-primary border-primary/30";case"COMPLETED":return"bg-success/20 text-success border-success/30";case"FUTURE":return"bg-warning/20 text-warning border-warning/30";default:return"bg-muted text-muted-foreground"}})(a.status)),children:a.status})}),(0,b.jsx)("td",{className:"p-4 text-right",onClick:a=>a.stopPropagation(),children:(0,b.jsxs)(n.DropdownMenu,{children:[(0,b.jsx)(n.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(k.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-50 hover:opacity-100",children:(0,b.jsx)(h.MoreHorizontal,{className:"w-4 h-4"})})}),(0,b.jsxs)(n.DropdownMenuContent,{align:"end",className:"w-40",children:[(0,b.jsxs)(n.DropdownMenuItem,{onClick:()=>d?.(a),children:[(0,b.jsx)(i,{className:"w-3.5 h-3.5 mr-2"})," View Details"]}),(0,b.jsx)(n.DropdownMenuItem,{children:"Edit Project"}),(0,b.jsx)(n.DropdownMenuItem,{children:"Add Bill"})]})]})})]},a.id)})})]})}),0===s.length&&(0,b.jsx)("div",{className:"p-12 text-center border-t border-border/50",children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No projects found. Try adjusting your filters."})})]})}var r=a.i(66718),s=a.i(80701),t=a.i(87532),u=a.i(50944);function v(){let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)("all"),[n,o]=(0,c.useState)("all"),[v,w]=(0,c.useState)("all"),x=(0,u.useRouter)();return(0,c.useEffect)(()=>{fetch("/api/departments").then(a=>a.json()).then(i)},[]),(0,c.useEffect)(()=>{let a=setTimeout(async()=>{g(!0);let a=new URLSearchParams({search:j,departmentId:l,year:n,status:v}),b=await fetch(`/api/projects?${a.toString()}`);e(await b.json()),g(!1)},300);return()=>clearTimeout(a)},[j,l,n,v]),(0,b.jsx)(d.DashboardLayout,{title:"Projects",currentPath:"/projects",onNavigate:a=>x.push(a),children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-4 items-center glass-card p-4 rounded-xl",children:[(0,b.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,b.jsx)(t.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,b.jsx)(r.Input,{placeholder:"Search project or client...",className:"pl-9",value:j,onChange:a=>k(a.target.value)})]}),(0,b.jsxs)(s.Select,{value:l,onValueChange:m,children:[(0,b.jsx)(s.SelectTrigger,{className:"w-48",children:(0,b.jsx)(s.SelectValue,{placeholder:"Department"})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"all",children:"All Departments"}),h.map(a=>(0,b.jsx)(s.SelectItem,{value:a.id.toString(),children:a.name},a.id))]})]}),(0,b.jsxs)(s.Select,{value:v,onValueChange:w,children:[(0,b.jsx)(s.SelectTrigger,{className:"w-40",children:(0,b.jsx)(s.SelectValue,{placeholder:"Status"})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(s.SelectItem,{value:"ONGOING",children:"Ongoing"}),(0,b.jsx)(s.SelectItem,{value:"COMPLETED",children:"Completed"})]})]}),(0,b.jsxs)(s.Select,{value:n,onValueChange:o,children:[(0,b.jsx)(s.SelectTrigger,{className:"w-32",children:(0,b.jsx)(s.SelectValue,{placeholder:"Year"})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"all",children:"All Years"}),[2024,2025,2026].map(a=>(0,b.jsx)(s.SelectItem,{value:a.toString(),children:a},a))]})]})]}),f?(0,b.jsx)(p,{}):(0,b.jsx)(q,{projects:a.map(a=>({...a,name:a.projectName,clientName:a.client.name,totalBudget:Number(a.totalProjectValue),signDate:a.startDate,status:a.bills.every(a=>"PAID"===a.status)?"COMPLETED":"ONGOING"})),onProjectClick:a=>x.push(`/projects/${a.id}`)})]})})}a.s(["default",()=>v],53524)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__6908acfd._.js.map